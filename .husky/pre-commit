#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo
echo 'ğŸ—ï¸ğŸ‘· Styling, testing, and building the project before committing ğŸ—ï¸ğŸ‘·'
echo

# Check ESLint Standards
yarn check-lint ||
(
  echo
  echo 'âŒ ESLint check failed. Make the required changes listed above, add changes and try to commit again âŒ'
  echo
  false; 
)

# Check tsconfig standards
yarn check-types ||
(
  echo
  echo 'âŒ Typescript types-check failed. Make the required changes listed above, add changes and try to commit again âŒ'
  echo
  false;
)

# If everything passes... Now we can try to build the project
echo
echo 'âœ… All the checks are successfully passed. Building project proceeds next âœ…'
echo


yarn build ||
(
  echo
  echo 'âŒ React build failed: view the above errors âŒ'
  echo
  false;
)

# If everything passes... Now we can commit
echo
echo 'âœ…âœ…âœ… The project has been successfully built and commit is accepted. âœ…âœ…âœ…'
echo

npx lint-staged